# Configuring SeeFusion

SeeFusion has a number of configuration options:

## General

| Parameter | Default | Description |
| --------- | ------- | ----------- |
enabled | On | Turns request monitoring on or off. When off, all page information, logging events, and counters will be lost. Note that this does not disable the database driver wrapper; SeeFusion-wrapped datasources will continue to function normally.
name| {hostname} | Use this parameter to specify a display name of your choosing. This name is displayed at the top of the SeeFusion console in the first pod on the left (e.g., "Server: DisplayName"), and in the Name column of the SeeFusion Enterprise dashboard display. Also, this is the value that will be entered in the database column "FilterName", if you have database logging enabled. Use the value "{hostname}" (without quotes) to have SeeFusion attempt to discover and use the local machine hostname.
maxRequests| 15 | This parameter is used solely for the sizing of the real-time charts at the bottom of the Server screen. (Note: It does not relate at all to the simultaneous threads setting in the ColdFusion Administrator.
browserURL | none [i.e., no link in dashboard] | In the Dashboard, each server's name (specified by the name parameter above) can be displayed as a hyperlink to the SeeFusion console for that server. This server name link in the dashboard display will open in a new browser window, which allows you to keep the dashboard open (and refreshing), while at the same time "drilling down" to an individual server to get more detailed information on that server. In order for the dashboard to display a server's name as a link, the browserURL parameter must be set in that server's configuration settings. For example, to set ServerA's name as a link on whichever dashboard display is monitoring that server, then go to the SeeFusion configuration screen for ServerA and set the browserURL parameter to the SeeFusion URL for ServerA.  Examples: http://ServerA:8999/, http://www01.mycompany.com:8999/
listeners | all:8999 | To get information from SeeFusion, it must be configured to "listen" for connections on one or more IP addresses. This parameter specifies a space-delimited list of IP addresses (and port numbers) where you want SeeFusion to bind and listen to, using the standard {ip}:{port} syntax. The IP addresses listed must be associated with one of the server's network interfaces or an "Unable to start listener" error will be logged. Instead of an IP address you can also type the word "all" to listen on all IP addresses associated with all of the server's network interfaces. If a port is not specified for an IP address, then SeeFusion will attempt to listen on port 8999.
jdbcDrivers | none | A space-delimited list of JDBC drivers to preload, if they're used by your application. Examples: `oracle.jdbc.driver.OracleDriver`, `com.informix.jdbc.IfxDriver`. If you don't specify driver names here, you'll have to add ";driver=driver.class.name" to the end of every SeeFusion-wrapped JDBC URL.

## Security

SeeFusion passwords are meant to be configured in "layers." If you set an httpPassword (below), but do not set an httpConfigPassword, then you will be locked out of the configuration screen entirely. If this happens, go into the seefusion.xml properties file, and manually set an httpConfigPassword. You can set it to blank ("httpConfigPassword=") to remove the password entirely, or to be the same as the httpPassword, or different, depending on how you want to control access to SeeFusion. DO NOT remove the entry entirely; just set it to blank if you'd like to remove that password. If you want to set passwords to control access to SeeFusion, start by setting an httpConfigPassword. Then you can set the httpPassword and httpKillPassword to be the same, or different, depending on whether you want a single security role, or multiple roles (e.g., separate roles for access, configuration, and kill functionality, which would require 3 distinct passwords).


| Parameter | Default | Description |
| --------- | ------- | ----------- |
httpConfigPassword | none | Setting this parameter allows you to control access to SeeFusion's configuration screen. If you set a value for this parameter, then the "Configuration" menu item at the top of the SeeFusion screen will be disabled unless you login using the httpConfigPassword.
httpKillPassword | none | If an httpKillPassword is set, and a user logs in with that password, then kill buttons will appear for running requests. Otherwise, they will not appear. If no httpKillPassword is set, then all users will see kill buttons, and can kill requests.
httpPassword | none | This parameter controls access to the SeeFusion display. If an httpPassword is set, users will see a login screen prior to the SeeFusion console loading.
ipWhitelist | none | If you're using an ipWhitelist, a user must be coming from a whitelisted IP to get the login screen; non-whitelisted IPs will have no access to SeeFusion (regardless of any password settings). This is a space-delimited list of IP addresses or network blocks that are allowed to connect to SeeFusion. If an entry ends with a period, then the connecting IP will be matched up to that period. For example, the entry "192.168." will match any IP address that begins with "192.168.", and an entry "192.168.5.11" would match only that exact IP address

## Display
| Parameter | Default | Description |
| --------- | ------- | ----------- |
historySize | 50 | If desired, SeeFusion will track recently-completed request metrics, and will display these metrics on the Recent Requests tab of the main server screen. Use this parameter to specify how many requests you want to keep in this history. Once this list is full, the oldest (not the slowest) entry is removed from the list as new entries are added. Note that this request history does NOT persist following a ColdFusion/Lucee restart. (Saving request information to a database for later analysis is an Enterprise-only feature.)
slowHistorySize | 50 | This parameter specifies how many "slow" requests to store on the Slow Requests tab (if slowPageThreshold below is set). Once this list is full, the oldest (not the slowest) entry is removed from the list as new entries are added. Note that this request history does NOT persist following a ColdFusion/Lucee restart. (Saving request information to a database for later analysis is an Enterprise-only feature.)
slowPageThreshold | 8000 | If desired, SeeFusion will track information for requests that run longer than this threshold, and display that list on the Slow Requests tab of the main server screen. The setting is specifed in milliseconds.
slowQueryThreshold | 1000 | This parameter is used to determine when the colored indicators are red/yellow/green in the Queries pod (top right pod). You can use this parameter to control how frequently the colored slow query visual alerts are displayed in the Queries pod. The indicators turn yellow when average query times reach 90% of the specified threshold, and red when they reach 98%.
historyIgnoreSuffixList | none | Space-delimited list of filenames or file extensions never to show in the "Recent Requests" and "Slow Requests" lists. This affects both the HTML and XML SeeFusion data, but does not affect the "Active Requests" tab (which always shows all requests), and does not affect the database logging of long-running requests (if enabled).
displayRelativeTimes | off | Set to "On" to see relative times, "Off" to see absolute date/time stamps (using the time at the SeeFusion console). This only applies to the "Completed" column of Recent and Slow tabs; SeeFusion XML dumps are unaffected.
clickableURLs | off | When enabled, request URLs are clickable links in the Active, Recent and Slow tabs. Click the green arrow next to any request to open that URL in a new browser window.
clickableIPURLs | off | This parameter is used to configure an IP address lookup service, for quick lookups of the source IP address of a given request (in the From column of the Active/Recent/Slow tabs). For example, if you enter "http://whatismyipaddress.com/ip/" (no quotes), then SeeFusion will prepend this address to the IP address in the From column, and a globe icon will appear next to the IP address, and clicking the globe icon will open this particular lookup service in a new window. Just enter your favorite IP lookup tool in the correct format for that tool.

## Dashboard

| Parameter | Default | Description |
| --------- | ------- | ----------- |
dashboardServers | none | The SeeFusion Dashboard will display a list of servers in a one-row-per-server format, which makes it easy to monitor the health of many servers. Servers that have running requests but no throughput will be listed as "SLOW" (highlighted in yellow), then "DOWN" (highlighted in red) if the situation persists. Servers with low memory, or almost no memory will have a "MEM" flag highighted in yellow, then red if the situation persists. <BR>In order to configure a dashboard, choose one of your SeeFusion instances, go to that instance's configuration screen, and enter the server names, separated by spaces, of each of the servers (with SeeFusion Enterprise installed) that you want to display in the dashboard. You can also display the dashboard server itself (i.e., enter "localhost"). Note: All servers either displaying or being displayed in a dashboard require an Enterprise license.<BR>the dashboard is accessed by clicking the Dashboard menu item in the SeeFusion console.<BR>The port number only needs to be specified for SeeFusion instances that are listening on a port other than 8999 (e.g., "www01:7999").

## Database Logging

SeeFusion has the ability to log slow request and query metrics, along with information about specific incidents that occur (such as logging info based on the activation of an Active Monitoring Rule.

As the design goals for SeeFusion are low overhead and minimal impact, SeeFusion's database logging does not hold up request processing, but rather the information about the slow request or query is queued to a very low priority thread for logging, and only 10 such requests are allowed to be queued at any given time. This means that it IS possible to "lose" slow request/query records, though in practice it's very unlikely. This also means that time synchronization across multiple Web servers is very important, as the Web server's current time is used to timestamp records. (The database server's current time can't be used, because there may be a queueing delay between the completion of the slow request/query and the insertion of that data into the database.)

Logging is turned on by entering the necessary information in the Database Logging section of the Configuration screen, and then enabling the logging system via the dbLoggerEnabled parameter. In order for logging to work, you must configure the database parameters in this section appropriately for the database SeeFusion will use for logging. Once you have set the database parameters properly, and you click the Save Settings link, SeeFusion will create the tables for you.

| Parameter | Default | Description |
| --------- | ------- | ----------- |
dbDriver | none | This is the driver class that SeeFusion will use to connect to the database specified below. Choose your database version from the dropdown. This driver must be in the same classpath as SeeFusion, or you'll see a "class not found" or "no suitable driver" error.
dbJdbcUrl | none | This is the full JDBC URL for the connection that SeeFusion will use for database logging. Note: Do NOT wrap this URL with the SeeFusion wrapper syntax ("jdbc:seefusion:{...}").<br>Example entry:<br>jdbc:macromedia:sqlserver://127.0.0.1:1433;databaseName= SeeFusion;SelectMethod=direct;sendStringParametersAsUnicode=false<br>or<br>jdbc:mysql://192.168.1.123:3306/seefusion_db
dbUserName | none | Username, if any, for the database that SeeFusion will use for logging.
dbPassword | none | Password, if any, for the database that SeeFusion will use for logging.
dbLogThreshold | (slowPageThreshold) | SeeFusion will only log requests that run longer than this value. Enter the value in milliseconds. If no value is entered, then the threshold will default to the value of the slowPageThreshold parameter (which itself defaults to 8 seconds).
dbLogQueryThreshold | none | SeeFusion will log all queries that run longer than this value. (This assumes that you're using the SeeFusion JDBC wrapper for any datasources used by your application(s).)
dbLogQueryExceptions | off | When enabled, SeeFusion will log all queries with exceptions. If this is "Off,"" then only completed queries that exceed dbLogQueryThreshold will be logged.
dbLogCountersThreshold | none | Interval (in seconds) at which Counters are logged to the Counters table. If no value is set, Counters logging will be disabled.
dbLoggerEnabled | Off | This is the on/off switch for database logging.